<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Soundness Memory Challenge</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0045ff; min-height: 100vh;
            display: flex; justify-content: center; align-items: center; overflow-x: hidden;
        }
        .container { position: relative; z-index: 1; width: 90%; max-width: 520px; padding: 15px; }
        .start-screen, .game-screen, .result-screen {
            background: #ffffff; border-radius: 20px; padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 219, 0.15); text-align: center; backdrop-filter: blur(10px);
        }
        .hidden { display: none; }
        h1 { color: #0045ff; font-size: 2.5em; margin-bottom: 20px; font-weight: 700; }
        .subtitle { color: black; font-size: 1.1em; margin-bottom: 30px; }
        input[type="text"] {
            width:100%; padding:15px; font-size:1.1em; border:2px solid #0045ff; border-radius:10px; margin-bottom:20px;
            transition:border-color .3s; outline:none;
        }
        input[type="text"]:focus { border-color:#0045ff; }
        button {
            background:#0045ff; color:#fff; border:none; padding:12px 30px; font-size:1.1em; border-radius:10px;
            cursor:pointer; transition: transform .2s, box-shadow .2s; font-weight:600; margin:8px;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,219,.35); }
        .game-header { display:flex; justify-content:space-between; margin-bottom:20px; flex-wrap:wrap; gap:10px; }
        .stat { background:#fff; padding:10px 20px; border-radius:10px; font-weight:600; color:#0045ff; }
        .stat-label { font-size:.9em; color:#0045ff; display:block; margin-bottom:5px; }
        .stat-value { font-size:1.3em; color:#0045ff; }
        .memory-grid { display:grid; grid-template-columns: repeat(6, 1fr); gap:10px; margin:10px 0; }
        .card { aspect-ratio:1; position:relative; cursor:pointer; perspective:1000px; }
        .card-inner { width:100%; height:100%; position:relative; transform-style:preserve-3d; transition: transform .6s; }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back {
            position:absolute; width:100%; height:100%; backface-visibility:hidden; border-radius:10px;
            display:flex; justify-content:center; align-items:center; font-size:2em;
        }
        .card-front { background:#0045ff; color:#fff; }
        .card-back { background:#fff; border:2px solid #0045ff; transform: rotateY(180deg); font-size:2.5em; color:#0045ff; }
        .card-image { width:100%; height:100%; object-fit:cover; pointer-events:none; border-radius:7px; display:block; }
        .card.matched { opacity:.6; pointer-events:none; }
        .result-screen h2 { color:#0045ff; font-size:2em; margin-bottom:20px; }
        .result-stat { font-size:1.3em; margin:15px 0; color:#0045ff; }
        .result-stat strong { color:#0045ff; }
        .share-button { background:#0045ff; margin-top:20px; }
        .music-toggle {
            position:fixed; right:20px; bottom:20px; width:56px; height:56px; border-radius:10px; background:#0045ff; color:#fff;
            border:none; display:flex; align-items:center; justify-content:center; font-weight:700; box-shadow:0 10px 25px rgba(0,0,219,.35);
            cursor:pointer; z-index:9999; border:2px solid white;
        }
        @media (max-width:600px) {
            h1 { font-size:2em; } .container { width:95%; } .start-screen, .game-screen, .result-screen { padding:25px; }
            .memory-grid { gap:6px; } .card-back { font-size:2em; } .game-header { justify-content:center; }
        }
        @media (max-width:400px) { .memory-grid { gap:5px; } .card-back { font-size:1.5em; } }
    </style>
</head>
<body>
    <div class="container">
        <div id="startScreen" class="start-screen">
            <h1>Soundness Memory Challenge</h1>
            <p class="subtitle">Test your memory and beat the clock!</p>
            <p style="text-align:left; color:black; line-height:1.4; margin-bottom:12px;">
                <strong>INSTRUCTIONS:</strong><br>
                • Flip two cards each turn.<br>
                • If the images match, they stay open — that’s a pair.<br>
                • If they don’t match, they flip back — remember their position!<br>
                • Finish all pairs with the least moves and lowest time to get a high score.
            </p>
            <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
            <button id="startButton" type="button">Start Game</button>
            <p style="margin-top:12px;">Made by <a href="https://x.com/bytrizz404" target="_blank" rel="noopener noreferrer" style="text-decoration:none; color:#0045ff;"><strong>Bytrizz</strong></a></p>
        </div>

        <div id="gameScreen" class="game-screen hidden">
            <div class="game-header">
                <div class="stat"><span class="stat-label">Player</span><span class="stat-value" id="displayName">-</span></div>
                <div class="stat"><span class="stat-label">Time</span><span class="stat-value" id="timer">0s</span></div>
                <div class="stat"><span class="stat-label">Moves</span><span class="stat-value" id="moves">0</span></div>
            </div>
            <div class="memory-grid" id="memoryGrid"></div>
            <button id="restartButton" type="button">Restart Game</button>
        </div>

        <div id="resultScreen" class="result-screen hidden">
            <h2>Congratulations!</h2>
            <p class="result-stat"><strong>Player:</strong> <span id="finalName">-</span></p>
            <p class="result-stat"><strong>Time:</strong> <span id="finalTime">-</span></p>
            <p class="result-stat"><strong>Moves:</strong> <span id="finalMoves">-</span></p>
            <p class="result-stat"><strong>Score:</strong> <span id="finalScore">-</span></p>
            <button id="shareButton" class="share-button" type="button">Share on X (Twitter)</button>
            <button id="playAgainButton" type="button">Play Again</button>
        </div>
    </div>

    <button id="musicToggle" class="music-toggle" aria-label="Toggle music" type="button">Music: On</button>
    <audio id="bgMusic" src="audio/bg.mp3" preload="auto" loop></audio>

    <script>
        
        const IMAGES = [
          { id: 'img1', src: 'images/img1.jpg', alt: 'Image 1' },
          { id: 'img2', src: 'images/img2.jpg', alt: 'Image 2' },
          { id: 'img3', src: 'images/img3.jpg', alt: 'Image 3' },
          { id: 'img4', src: 'images/img4.jpg', alt: 'Image 4' },
          { id: 'img5', src: 'images/img5.jpg', alt: 'Image 5' },
          { id: 'img6', src: 'images/img6.jpg', alt: 'Image 6' },
          { id: 'img7', src: 'images/img7.jpg', alt: 'Image 7' },
          { id: 'img8', src: 'images/img8.jpg', alt: 'Image 8' },
          { id: 'img9', src: 'images/img9.jpg', alt: 'Image 9' },
          { id: 'img10', src: 'images/img10.jpg', alt: 'Image 10' },
          { id: 'img11', src: 'images/img11.jpg', alt: 'Image 11' },
          { id: 'img12', src: 'images/img12.jpg', alt: 'Image 12' },
          { id: 'img13', src: 'images/img13.jpg', alt: 'Image 13' },
          { id: 'img14', src: 'images/img14.jpg', alt: 'Image 14' },
          { id: 'img15', src: 'images/img15.jpg', alt: 'Image 15' },
          { id: 'img16', src: 'images/img16.jpg', alt: 'Image 16' },
          { id: 'img17', src: 'images/img17.jpg', alt: 'Image 17' },
          { id: 'img18', src: 'images/img18.jpg', alt: 'Image 18' }
        ];

        
        let playerName = '';
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let timer = 0;
        let timerInterval = null;
        let canFlip = true;

        const images = (typeof IMAGES !== "undefined") ? IMAGES : [];

        // DOM
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');
        const playerNameInput = document.getElementById('playerName');
        const startButton = document.getElementById('startButton');
        const memoryGrid = document.getElementById('memoryGrid');
        const displayName = document.getElementById('displayName');
        const timerDisplay = document.getElementById('timer');
        const movesDisplay = document.getElementById('moves');
        const restartButton = document.getElementById('restartButton');
        const playAgainButton = document.getElementById('playAgainButton');
        const shareButton = document.getElementById('shareButton');
        const musicToggle = document.getElementById('musicToggle');
        const bgMusic = document.getElementById('bgMusic');
        let musicEnabled = true;
        if (bgMusic) { bgMusic.volume = 0.35; }

       
        startButton.addEventListener('click', () => {
            playerName = playerNameInput.value.trim();
            if (!playerName) { alert('Please enter your name!'); return; }
            showGameScreen();
            if (bgMusic && musicEnabled) { bgMusic.play().catch(()=>{}); }
        });

        playerNameInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') startButton.click(); });
        restartButton.addEventListener('click', () => resetGame());
        if (musicToggle) {
            musicToggle.addEventListener('click', () => {
                musicEnabled = !musicEnabled;
                musicToggle.textContent = musicEnabled ? 'Music: On' : 'Music: Off';
                if (!bgMusic) return;
                if (musicEnabled) bgMusic.play().catch(()=>{}); else bgMusic.pause();
            });
        }
        playAgainButton.addEventListener('click', () => showStartScreen());
        shareButton.addEventListener('click', () => {
            const score = calculateScore();
            const text = `I just completed the Soundness Memory Challenge! My score: ${score}. Can you beat me? Play now: https://soundness-memory-card-game.vercel.app/`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
            const shareWin = window.open(url, '_blank', 'noopener,noreferrer'); if (shareWin) shareWin.opener = null;
        });

        
        function showGameScreen() {
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
            displayName.textContent = playerName;
            initializeGame();
        }
        function showStartScreen() {
            startScreen.classList.remove('hidden');
            gameScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            playerNameInput.value = '';
        }
        function showResultScreen() {
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            const score = calculateScore();
            document.getElementById('finalName').textContent = playerName;
            document.getElementById('finalTime').textContent = formatTime(timer);
            document.getElementById('finalMoves').textContent = moves;
            document.getElementById('finalScore').textContent = score;
        }

       
        function initializeGame() {
            resetGameState();
            createCards();
            startTimer();
        }
        function resetGameState() {
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            timer = 0;
            canFlip = true;
            movesDisplay.textContent = '0';
            timerDisplay.textContent = '0s';
            if (timerInterval) clearInterval(timerInterval);
        }
        function resetGame() {
            memoryGrid.innerHTML = '';
            initializeGame();
        }

        
        function createCards() {
            memoryGrid.innerHTML = '';
            const cardImages = [...images, ...images]; // duplicate for pairs
            shuffleArray(cardImages);
            cardImages.forEach((image, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.imageId = image.id;
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front"></div>
                        <div class="card-back"><img class="card-image" src="${encodeURI(image.src)}" alt="${image.alt}"></div>
                    </div>
                `;
                card.addEventListener('click', () => flipCard(card));
                memoryGrid.appendChild(card);
            });
        }

        
        function flipCard(card) {
            if (!canFlip || card.classList.contains('flipped') || card.classList.contains('matched')) return;
            card.classList.add('flipped');
            flippedCards.push(card);
            if (flippedCards.length === 2) {
                canFlip = false;
                moves++;
                movesDisplay.textContent = moves;
                checkMatch();
            }
        }
        function checkMatch() {
            const [card1, card2] = flippedCards;
            const imageId1 = card1.dataset.imageId;
            const imageId2 = card2.dataset.imageId;
            if (imageId1 === imageId2) {
                setTimeout(() => {
                    card1.classList.add('matched');
                    card2.classList.add('matched');
                    matchedPairs++;
                    flippedCards = [];
                    canFlip = true;
                    if (matchedPairs === images.length) endGame();
                }, 500);
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    canFlip = true;
                }, 1000);
            }
        }

        
        function startTimer() {
            timerInterval = setInterval(() => {
                timer++;
                timerDisplay.textContent = formatTime(timer);
            }, 1000);
        }
        function endGame() {
            clearInterval(timerInterval);
            setTimeout(() => showResultScreen(), 500);
        }

       
        function calculateScore() {
            const score = Math.max(0, 10000 - (moves * 100) - (timer * 10));
            return Math.round(score);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
</body>
</html>

